---
title: 微信小程序自定义导航栏
date: 2024-11-07 19:45:16
tags: ["小程序","微信"]
categories: 
    - ["前端"]
    - ["小程序"]
top_img: https://img2.baidu.com/it/u=1270662364,2069731781&fm=253&fmt=auto&app=138&f=JPEG?w=889&h=500
cover: https://img2.baidu.com/it/u=534490904,3498620580&fm=253&fmt=auto&app=120&f=JPEG?w=750&h=500
---

1. 现在`app.json` 文件中把导航栏属性改为自定义

```json
 
 "window": {
    "navigationStyle": "custom"
  },
```

2. 然后再`app.js`文件中调用`wx.getWindowInfo()` 接口，全局获取手机顶部状态栏的高度，如果要把高度大小单位换算成rpx，则还需获取屏幕宽度，运用公式进行换算


```jsx
// app.js
App({
  onLaunch() {
    const windowInfo = wx.getWindowInfo()
    const statusBarHeight=windowInfo.statusBarHeight
    const screenWidth=windowInfo.screenWidth
    this.globalData.navBarHeight = statusBarHeight*750/screenWidth + 96;
    // console.log(statusBarHeight*750/screenWidth + 96);
    
  },
  globalData: {
    navBarHeight: 0
  }
})

```

这里设置自定义导航栏高度为96rpx

1. 在对应页面的`js`文件中获取`app.js`中的全局导航栏+手机状态栏高度大小
    
    ```jsx
    // pages/home/home.js
    const app = getApp();
    Page({
    
      /**
       * 页面的初始数据
       */
      data: {
        navBarHeight: app.globalData.navBarHeight
      },
    
     
    })
    ```
    

4. 在对应页面的`wxml`文件中引入自定义导航栏
    
    ```html
    <t-navbar
      t-class-placeholder="t-navbar-placeholder"
      t-class-content="t-navbar-content"
      class="custom-navbar"
      title="标题文字"
    />
    //页面主要内容margin-top值为app.js中获取到的导航栏加手机状态栏的高度
    <view class="home" style="margin-top:{{navBarHeight}}rpx;">
      <text>pages/home/home.wxml</text>
    </view>
    ```
    
    ```css
    .custom-navbar{
      position: fixed;
      top: 0;
      left: 0;
      /* height: 100px !important; */
      --td-navbar-color: #fff;
      --td-navbar-bg-color: #0052d9;
    }
    
    ```